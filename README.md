一、项目概述
1.1 项目名称
Flappy Dragon（飞扬的龙）
1.2 项目简介
Flappy Dragon 是一款基于 Rust 语言和 bracket - lib 游戏库开发的简易 2D 像素风格游戏。其灵感源自经典游戏 “Flappy Bird” ，玩家操控以特殊字符表示的角色，穿越一系列障碍物。通过按下空格键，角色能够上升，而重力作用会使角色自然下落。一旦角色碰到障碍物或者屏幕边界，游戏即宣告结束。玩家成功穿过的障碍物数量越多，得分也就越高。
1.3 开发环境与依赖
编程语言：Rust，凭借其内存安全、高效性能以及强大的类型系统，为游戏开发提供了坚实的基础，确保游戏在运行过程中的稳定性和可靠性。
核心游戏库：bracket - lib，该库为游戏开发提供了全面的支持，涵盖游戏循环的管理、图形渲染的实现以及输入处理的功能，极大地简化了游戏开发的流程，使开发者能够专注于游戏逻辑的实现。
其他依赖：lazy_static，主要用于定义静态默认参数，方便在游戏中管理一些固定且在运行时才初始化的参数，减少重复计算和资源开销。
二、核心功能与游戏机制
2.1 游戏模式
游戏通过状态机管理，包含三种核心模式，每种模式都有其独特的功能和作用，为玩家带来丰富且连贯的游戏体验。
2.1.1 菜单模式（Menu）
游戏启动后，首先映入玩家眼帘的便是菜单模式。此模式作为游戏的初始界面，简洁而直观，为玩家提供了两个关键选项：开始游戏和退出游戏。玩家在该界面可以看到精心设计的标题，以及清晰标注的操作提示，按下 “P” 键即可开启充满挑战的游戏之旅；若按下 “Q” 键，则可随时退出游戏，操作便捷，让玩家能够迅速进入或离开游戏世界 。
2.1.2 游戏模式（Playing）
游戏模式是整个游戏的核心部分，也是玩家花费时间最多、参与度最高的模式。在该模式下，玩家操控角色正式开启冒险。玩家角色按照既定的移动规则，在重力的影响下自然下落，速度逐渐增加，最大速度限制为 2.0 ，同时，玩家通过按下空格键，可使角色向上飞行，速度设置为 -2.0，以躲避障碍物。在水平方向上，角色会自动向前移动，x 坐标持续增加。在这个模式中，玩家需要全神贯注，根据障碍物的位置和自身角色的状态，精准地控制按键时机，展现自己的反应速度和操作技巧。
2.1.3 结束模式（End）
当玩家角色碰到屏幕边界或障碍物时，游戏进入结束模式。此时，屏幕上会清晰地显示玩家的最终得分，让玩家直观地了解自己的游戏成果。同时，界面会提供重新开始和退出选项。玩家若意犹未尽，按下 “P” 键即可重新开始游戏，再次挑战自己；若觉得游戏体验已足够，按下 “Q” 键便可退出游戏。这种设计为玩家提供了自主选择的权利，使玩家能够根据自己的意愿决定后续行动。
2.2 玩家机制
2.2.1 初始位置
玩家角色在游戏开始时，其初始位置被固定设定为 (x=5, y=25)。这一固定的初始位置为游戏的公平性和一致性奠定了基础，使得每一局游戏都在相同的起点展开，玩家们站在同一起跑线上开启冒险，避免了因初始位置差异而带来的不公平竞争因素，保证了游戏的公正性和竞技性，让玩家能够凭借自身的实力和操作技巧去争取更好的成绩。
2.2.2 移动规则
重力影响下的下落规则：玩家角色在游戏过程中，会受到重力的持续作用，从而自然下落。随着时间的推移，下落速度会逐渐增加，最大速度被设定为 2.0 。这一规则模拟了现实世界中的重力效果，为游戏增添了真实感和挑战性，玩家需要时刻关注角色的下落状态，以便及时做出应对。
空格键控制的上升规则：当玩家按下空格键时，角色会获得向上飞行的动力，飞行速度被设置为 -2.0。这种向上飞行的操作是玩家躲避障碍物、维持游戏进程的关键手段之一，玩家需要根据障碍物的位置和角色的当前状态，准确把握按下空格键的时机，以实现顺利穿越障碍物的目的。
水平自动移动规则：在水平方向上，玩家角色会自动向前移动，其 x 坐标持续增加。这种自动移动的设计简化了玩家的操作，使玩家能够将更多的注意力集中在垂直方向上的操作，即控制角色的上升和下落，以应对不断出现的障碍物。
2.2.3 碰撞判定
游戏中，当玩家角色碰到屏幕边界（底部）或障碍物时，系统会立即判定游戏结束。这一碰撞判定规则明确了游戏的结束条件，使得游戏的进程和结果具有清晰的界定。玩家在游戏过程中，需要时刻警惕角色与屏幕边界和障碍物的距离，避免发生碰撞，以延长游戏时间，获得更高的分数。
2.3 障碍物机制
2.3.1 呈现形式与属性
游戏中的障碍物以竖线的形式呈现，简洁明了。每个障碍物都具有特定的属性：
水平位置（x）：障碍物的初始生成位置在屏幕右侧外，随着游戏的进行，逐渐向左移动进入屏幕区域，为玩家带来持续的挑战。
空隙位置（gap_y）：空隙位置是决定玩家能否顺利通过障碍物的关键因素，它随机生成在 10 - 40 之间，增加了游戏的不确定性和挑战性，玩家需要在游戏过程中根据实时生成的空隙位置，灵活调整角色的飞行高度。
大小（size）：障碍物的大小并非固定不变，而是随玩家得分的增加而增大，其计算公式为：max (2, 20 - 得分)。这意味着玩家得分越高，障碍物的空隙越小，游戏难度也就越大，有效地激励玩家不断挑战自我，突破更高的分数。
2.3.2 生成规则
当玩家成功穿过当前障碍物后，系统会自动在屏幕右侧生成新的障碍物。这种生成规则保证了游戏的连贯性和持续性，使玩家在游戏过程中始终面临新的挑战，避免了游戏过程的单调和乏味。同时，新障碍物的生成位置和属性的随机性，也进一步增加了游戏的趣味性和挑战性，让玩家每次面对新的障碍物时都需要重新思考和决策。
2.3.3 碰撞判定
当玩家与障碍物在同一 x 坐标，且 y 坐标不在空隙范围内时，系统判定为碰撞，游戏结束。这一碰撞判定规则对玩家的操作精度提出了较高的要求，玩家需要在控制角色飞行的过程中，精确计算角色与障碍物的位置关系，确保在通过障碍物时，y 坐标处于空隙范围内，以避免碰撞，顺利推进游戏进程。
2.4 计分系统
得分增加规则：玩家每成功穿过一个障碍物，得分便会加 1 。这一简单而明确的得分规则，直观地反映了玩家在游戏中的表现和成就，激励玩家不断挑战自己，尽可能多地穿过障碍物，以获得更高的分数。
得分影响障碍物大小规则：得分不仅是玩家游戏成果的体现，还会对新生成障碍物的大小产生影响。随着得分的增加，新生成障碍物的空隙会逐渐变小，游戏难度相应增大。这种设计在游戏难度和玩家能力之间建立了动态平衡，使得游戏在玩家能力提升的同时，不断提供新的挑战，保持了游戏的趣味性和挑战性。
游戏结束显示最终得分：当游戏结束时，玩家的最终得分会清晰地显示在屏幕上，让玩家能够直观地了解自己在这一局游戏中的表现。这不仅是对玩家游戏过程的总结，也为玩家提供了一个与自己或其他玩家比较的依据，激发玩家再次挑战的欲望。
三、游戏使用方法
3.1 启动游戏
本游戏基于 Rust 语言开发，需借助 Rust 包管理器 Cargo 来运行。在确保已正确安装 Rust 和 Cargo 环境后，打开终端，进入游戏项目所在目录，执行如下命令：
cargo run

执行该命令后，Cargo 会自动读取项目中的Cargo.toml文件，下载项目依赖项，并对项目进行编译和构建。编译成功后，游戏将自动启动，弹出游戏窗口 ，玩家即可开启游戏之旅。
3.2 操作指南
主菜单：
按 “P” 键：开始游戏，进入紧张刺激的游戏模式，开启穿越障碍物的挑战之旅。
按 “Q” 键：退出游戏，结束当前游戏进程，返回操作系统桌面。
游戏中：按空格键：控制角色向上飞行，玩家可根据障碍物的位置和角色的当前状态，适时按下空格键，使角色向上飞起，躲避障碍物。若不按空格键，角色则会受重力影响自然下落。
游戏结束界面：
按 “P” 键：重新开始游戏，玩家可以再次挑战自己，尝试突破上一局的得分记录。
按 “Q” 键：退出游戏，结束当前游戏会话，离开游戏界面。
3.3 游戏目标
玩家在游戏中的核心目标是控制角色穿过尽可能多的障碍物，以获得更高的分数。每成功穿过一个障碍物，玩家的得分便会增加 1 分 。随着得分的不断积累，后续生成的障碍物难度会逐渐增加，空隙变小，对玩家的操作技巧和反应速度提出更高的要求。玩家需要在游戏过程中，精准把握按键时机，巧妙控制角色的飞行高度，不断挑战自我，突破更高的分数记录，在这个充满挑战的游戏世界中展现自己的实力和技巧。
